<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script src="js/theme-manager.js"></script>
    <title>SVG Animator Pro - Shape Styling Demo</title>
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="theme-toggle" title="Toggle dark/light mode">
        <svg class="sun-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
        </svg>
        <svg class="moon-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
        </svg>
    </button>
    
    <div class="container">
        <div class="header">
            <h1>SVG Animator Pro - Shape Styling Demo</h1>
            <p>Test the new shape styling controls with built-in SVG shapes</p>
        </div>

        <div class="main-grid">
            <!-- Left Panel - Controls -->
            <div class="panel">
                <div class="panel-header">
                    <span>üé® Shape Styling Controls</span>
                </div>
                <div class="panel-content">
                    <!-- Shape Styling Controls Panel -->
                    <div id="shape-styling-panel" class="styling-panel">
                        <div class="styling-panel-header">
                            <span>üé® Shape Styling</span>
                        </div>
                        <div class="styling-controls">
                            <div class="control-group">
                                <label class="control-label">Fill Color</label>
                                <div class="color-controls">
                                    <input type="color" id="fill-color" class="color-picker" value="#ff6b6b" title="Select fill color">
                                    <input type="range" id="fill-opacity" min="0" max="100" value="100" class="opacity-slider" title="Fill opacity">
                                    <span id="fill-opacity-display" class="opacity-display">100%</span>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <label class="control-label">Stroke Color</label>
                                <div class="color-controls">
                                    <input type="color" id="stroke-color" class="color-picker" value="#333333" title="Select stroke color">
                                    <input type="range" id="stroke-opacity" min="0" max="100" value="100" class="opacity-slider" title="Stroke opacity">
                                    <span id="stroke-opacity-display" class="opacity-display">100%</span>
                                </div>
                            </div>
                            
                            <div class="control-group">
                                <label class="control-label">Stroke Width</label>
                                <div class="stroke-width-control">
                                    <input type="range" id="stroke-width" min="0" max="20" step="0.5" value="2" class="stroke-width-slider" title="Stroke width">
                                    <span id="stroke-width-display" class="stroke-width-display">2px</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="demo-instructions">
                        <h3>How to Test:</h3>
                        <ol>
                            <li>Click on any shape below to select it</li>
                            <li>Use the controls above to change its appearance</li>
                            <li>Try different colors, opacity levels, and stroke widths</li>
                            <li>Click on different shapes to see their current properties</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Center Panel - SVG Viewer -->
            <div class="panel">
                <div class="panel-header">
                    <span>üé® SVG Preview</span>
                </div>
                <div class="panel-content">
                    <div id="svg-viewer" class="svg-viewer">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 300" width="400" height="300">
                            <!-- Rectangle -->
                            <rect id="rect1" x="50" y="50" width="80" height="60" fill="#ff6b6b" stroke="#333" stroke-width="2" style="cursor: pointer;"/>
                            
                            <!-- Circle -->
                            <circle id="circle1" cx="200" cy="80" r="40" fill="#4ecdc4" stroke="#333" stroke-width="2" style="cursor: pointer;"/>
                            
                            <!-- Ellipse -->
                            <ellipse id="ellipse1" cx="320" cy="80" rx="50" ry="30" fill="#45b7d1" stroke="#333" stroke-width="2" style="cursor: pointer;"/>
                            
                            <!-- Line -->
                            <line id="line1" x1="50" y1="200" x2="150" y2="200" stroke="#96ceb4" stroke-width="3" style="cursor: pointer;"/>
                            
                            <!-- Polygon -->
                            <polygon id="polygon1" points="200,150 250,200 200,250 150,200" fill="#feca57" stroke="#333" stroke-width="2" style="cursor: pointer;"/>
                            
                            <!-- Path -->
                            <path id="path1" d="M300 150 Q350 100 400 150 T500 150" fill="none" stroke="#ff9ff3" stroke-width="4" style="cursor: pointer;"/>
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Info -->
            <div class="panel">
                <div class="panel-header">
                    <span>‚ÑπÔ∏è Information</span>
                </div>
                <div class="panel-content">
                    <div class="info-section">
                        <h3>Selected Shape</h3>
                        <div id="shape-info">
                            <p>Click on a shape to see its properties</p>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3>Features</h3>
                        <ul>
                            <li>Real-time color changes</li>
                            <li>Opacity control (0-100%)</li>
                            <li>Stroke width adjustment</li>
                            <li>Automatic format conversion</li>
                            <li>Immediate visual feedback</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <p class="status-text">Ready to test shape styling controls! üé®</p>
        </div>
    </div>

    <script src="js/shape-styling.js"></script>
    <script>
        // Demo-specific functionality
        let selectedElement = null;
        
        // Initialize the demo
        document.addEventListener('DOMContentLoaded', function() {
            initializeShapeStyling();
            
            // Add click handlers to SVG elements
            const svgElements = document.querySelectorAll('svg [id]');
            svgElements.forEach(element => {
                element.addEventListener('click', function(e) {
                    e.stopPropagation();
                    selectShape(this);
                });
            });
            
            // Add click handler to SVG viewer to clear selection
            document.getElementById('svg-viewer').addEventListener('click', function(e) {
                if (e.target === this || e.target.tagName === 'svg') {
                    clearSelection();
                }
            });
        });
        
        function selectShape(element) {
            // Clear previous selection
            if (selectedElement) {
                selectedElement.style.outline = '';
            }
            
            // Select new element
            selectedElement = element;
            element.style.outline = '2px solid #6366f1';
            
            // Update styling controls
            updateStylingControlsFromElement(element);
            
            // Update shape info
            updateShapeInfo(element);
            
            // Update status
            document.querySelector('.status-text').textContent = `Selected: ${element.tagName} (${element.id}) üéØ`;
        }
        
        function clearSelection() {
            if (selectedElement) {
                selectedElement.style.outline = '';
                selectedElement = null;
            }
            
            // Update shape info
            document.getElementById('shape-info').innerHTML = '<p>Click on a shape to see its properties</p>';
            
            // Update status
            document.querySelector('.status-text').textContent = 'Ready to test shape styling controls! üé®';
        }
        
        function updateShapeInfo(element) {
            const actualShape = getActualShapeElement(element);
            const fill = actualShape.style.fill || actualShape.getAttribute('fill') || 'none';
            const stroke = actualShape.style.stroke || actualShape.getAttribute('stroke') || 'none';
            const strokeWidth = actualShape.style.strokeWidth || actualShape.getAttribute('stroke-width') || 'none';
            
            document.getElementById('shape-info').innerHTML = `
                <p><strong>Type:</strong> ${actualShape.tagName}</p>
                <p><strong>ID:</strong> ${actualShape.id}</p>
                <p><strong>Fill:</strong> ${fill}</p>
                <p><strong>Stroke:</strong> ${stroke}</p>
                <p><strong>Stroke Width:</strong> ${strokeWidth}</p>
            `;
        }
    </script>
</body>
</html>
